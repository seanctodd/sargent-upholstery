{{- $reviews := site.Data.reviews -}}
{{- if $reviews -}}
{{- $fivestar := where $reviews "rating" 5 -}}
{{- if $fivestar -}}
<section class="reviews-section">
  <div class="container">
    <h2 class="section-heading">What Our Customers Say</h2>
    <div class="reviews-grid" id="reviews-grid">
      {{- range $fivestar }}
      <div class="review-card" style="display:none">
        <div class="review-stars">
          {{- range seq 5 }}&#9733;{{ end -}}
        </div>
        <blockquote class="review-text">
          {{- $text := .text -}}
          {{- if gt (len $text) 200 -}}
            {{ printf "%.200s" $text }}&hellip;
          {{- else -}}
            {{ $text }}
          {{- end -}}
        </blockquote>
        <cite class="review-author">{{ .author }}</cite>
        <span class="review-source">Google Review</span>
      </div>
      {{- end }}
    </div>
    <div class="text-center reviews-cta">
      <a href="https://www.google.com/maps/search/Sargent+Upholstery+Co+44+E+1st+St+Jacksonville+FL+32206" class="btn btn-navy" target="_blank" rel="noopener">See All Reviews on Google</a>
    </div>
  </div>
</section>
<script>
(function () {
  var cards = Array.prototype.slice.call(document.querySelectorAll('#reviews-grid .review-card'));
  for (var i = cards.length - 1; i > 0; i--) {
    var j = Math.floor(Math.random() * (i + 1));
    var tmp = cards[i]; cards[i] = cards[j]; cards[j] = tmp;
  }
  cards.slice(0, 4).forEach(function (card) {
    card.style.display = '';
  });
})();
</script>
{{- end -}}
{{- end -}}
